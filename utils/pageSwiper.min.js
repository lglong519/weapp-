'use strict';var _Mathabs=Math.abs,config=require('../config');module.exports=function(a){if(!a||!a.prev||!a.next||!a.type)throw new TypeError('Invalid params');return{swiperData:{startAt:0,startX:0,startY:0,endX:0,endY:0,moving:!1},swiperTouchstart:function swiperTouchstart(b){this.swiperData.startAt=b.timeStamp,this.swiperData.startX=b.touches[0].pageX,this.swiperData.startY=b.touches[0].pageY,this.swiperData.moving=!1},swiperTouchmove:function swiperTouchmove(b){var c=this.swiperData,d=c.endX,f=c.startY,g=c.startX,h=b.touches[0],i=h.pageX,j=h.pageY;return _Mathabs(j-f)>config.SWIPER.MAX_Y?(this.swiperData.endX=g,void this.setData({swiperX:'0'})):void(5>_Mathabs(i-d)||(this.swiperData.endX=i,this.swiperData.endY=j,this.swiperData.moving=!0,this.setData({swiperX:1.5*(i-this.swiperData.startX)+'rpx'})))},swiperTouchend:function swiperTouchend(b){this.data.swiperX&&this.setData({swiperX:0});var c=_Mathabs(this.swiperData.startY-this.swiperData.endY);if(!(b.timeStamp-this.swiperData.startAt>config.SWIPER.DURATION||!this.swiperData.moving||c>config.SWIPER.MAX_Y)){var d,f=this.swiperData.startX-this.swiperData.endX;if(f>config.SWIPER.MIN_X)d=a.next;else if(f<-config.SWIPER.MIN_X)d=a.prev;else return;wx[a.type]({url:d})}}}};
